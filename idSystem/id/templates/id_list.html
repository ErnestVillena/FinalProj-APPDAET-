{% extends 'base.html' %}

{% block content %}
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f9fafb;
        color: #333;
    }

    h1 {
        text-align: center;
        margin-bottom: 1.5rem;
        color: #2c3e50;
    }

    form.search-form {
        max-width: 700px;
        margin: 0 auto 2rem auto;
        display: flex;
        gap: 10px;
        align-items: center;
    }

        form.search-form input[type="text"],
        form.search-form select {
            flex: 1;
            padding: 0.5rem 0.75rem;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.2s ease-in-out;
        }

            form.search-form input[type="text"]:focus,
            form.search-form select:focus {
                border-color: #2c6b2f; /* dark green */
                outline: none;
            }

        form.search-form button {
            background-color: #2c6b2f; /* dark green */
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

            form.search-form button:hover {
                background-color: #3a7d3e; /* lighter green */
            }

    table {
        max-width: 700px;
        margin: 0 auto;
        width: 100%;
        border-collapse: collapse;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        background: white;
        border-radius: 8px;
        overflow: hidden;
    }

        table thead {
            background-color: #2c6b2f; /* dark green */
            color: white;
        }

        table th, table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        table tbody tr:hover {
            background-color: #e6f2e6; /* very light green background */
        }

        table tbody tr:last-child td {
            border-bottom: none;
        }

    .actions a {
        color: #2c6b2f; /* dark green */
        text-decoration: none;
        margin-right: 10px;
        font-weight: 500;
    }

        .actions a:hover {
            text-decoration: underline;
        }

    .add-new-btn {
        display: block;
        max-width: 700px;
        margin: 2rem auto 0 auto;
        background-color: #2c6b2f; /* dark green */
        color: white;
        padding: 10px 16px;
        text-align: center;
        text-decoration: none;
        font-weight: 600;
        border-radius: 6px;
        transition: background-color 0.3s ease;
    }

        .add-new-btn:hover {
            background-color: #3a7d3e; /* lighter green */
        }

    /* Responsive for small screens */
    @media (max-width: 768px) {
        form.search-form {
            flex-direction: column;
            gap: 12px;
        }

        .actions a {
            display: inline-block;
            margin-bottom: 6px;
        }
    }
</style>

<h1>ID Credentials</h1>

<form method="get" class="search-form" role="search" aria-label="Search ID Credentials">
    <input type="text" name="q" placeholder="Search by name" value="{{ search_query }}" aria-label="Search by name">
    <select name="category" aria-label="Filter by ID type">
        <option value="all" {% if selected_category == 'all' %}selected{% endif %}>All Types</option>
        {% for type in id_types %}
        <option value="{{ type.id }}" {% if selected_category == type.id|stringformat:'s' %}selected{% endif %}>
            {{ type.idType_kind }}
        </option>
        {% endfor %}
    </select>
    <button type="submit">Search</button>
</form>

<table role="table" aria-label="List of ID credentials">
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Type</th>
            <th scope="col">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for cred in credentials %}
        <tr>
            <td>{{ cred.idCred_name }}</td>
            <td>
                {% if cred.id_types.all %}
                {{ cred.id_types.first.idType_kind }}
                {% else %}
                No type assigned
                {% endif %}
            </td>
            <td class="actions">
                <a href="{% url 'id:id-detail' cred.pk %}">View</a>
                <a href="{% url 'id:id-edit' cred.pk %}">Edit</a>
                <a href="{% url 'id:id-delete' cred.pk %}">Delete</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="3" style="text-align:center; padding: 20px;">No credentials found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a href="{% url 'id:id-add' %}" class="add-new-btn">+ Add New ID</a>

{% endblock %}

